(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1053:function(t,e,r){"use strict";r(800)},1054:function(t,e,r){var o=r(6)((function(i){return i[1]}));o.push([t.i,'@keyframes spin-8e7f7b94{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.request-page[data-v-8e7f7b94]{padding:24px 20px}@media(min-width:480px){.request-page[data-v-8e7f7b94]{padding:32px 40px}}h1[data-v-8e7f7b94]{margin-bottom:24px}.request-placeholders[data-v-8e7f7b94]{overflow:hidden;position:relative}.request-placeholders[data-v-8e7f7b94]:after{background:linear-gradient(0deg,#fff,hsla(0,0%,100%,0));bottom:0;content:"";height:70%;left:0;position:absolute;right:0}.request-list[data-v-8e7f7b94]{min-height:300px}.request-list[data-v-8e7f7b94] .infinite-scroller .preloader{height:120px}.request-list[data-v-8e7f7b94] .post+.post{margin-top:16px}@media(min-width:480px){.request-list[data-v-8e7f7b94] .post+.post{margin-top:24px}}.empty[data-v-8e7f7b94]{align-items:center;display:flex;flex-direction:column;height:500px;justify-content:center;text-align:center}.empty .empty-icon[data-v-8e7f7b94]{height:58px;margin:0 auto 16px;width:58px}.empty .empty-icon[data-v-8e7f7b94] svg{display:block}.empty .empty-title[data-v-8e7f7b94]{font-weight:600;margin-bottom:8px}.empty .empty-detail[data-v-8e7f7b94]{max-width:360px}',""]),o.locals={},t.exports=o},1471:function(t,e,r){"use strict";r.r(e);var o=r(8),n=r(10),h=r(96),l=(r(45),{name:"RequestIconSearchPage",components:{requestSearch:()=>r.e(83).then(r.bind(null,1482)),requestForm:()=>r.e(76).then(r.bind(null,1467)),requestPost:()=>r.e(69).then(r.bind(null,1457)),requestPlaceholder:()=>r.e(81).then(r.bind(null,1483)),appInfiniteScroll:()=>r.e(2).then(r.bind(null,1484))},layout:"request-icon",async asyncData(t){let{route:e,store:r,env:o,query:n,req:l,redirect:c,error:d}=t,f=0,m=[],y=1;const v=r.state["request-icons"].makers;let x=!1,k=r.state.auth.user.authToken;try{const t=await h.a.fetchRequests({sort:"-createdAt",authToken:k,limit:15});if(m=t.docs,f=t.total,y=t.pages,m.length||(x=!0),k&&!v)try{await r.dispatch("request-icons/fetchMakers",k)}catch(t){}}catch(t){console.error(t)}return r.dispatch("updateSEO",{title:"Request an icon | Icons8",description:"Request icons in your favourite style. Help us make our iconic world a better place."}),{total:f,pages:y,limit:15,posts:m,initialEmpty:x,initialUser:!1}},data:()=>({initialUser:!1,page:1,makersIsLoading:!1,pages:1,limit:15,query:"",sortBy:"-createdAt",filterBy:"all",total:0,initialEmpty:!1,searchNotfound:!1,loading:!1,loadingMore:!1,posts:[]}),computed:{...Object(o.c)("request-icons",["getSorting"]),...Object(o.e)({user:t=>t.auth.user,platforms:t=>t.appInfo.platforms,makers:t=>t["request-icons"].makers}),requestedPlatformsList(){const t={};for(const[e,r]of Object.entries(this.platforms))r.isDeprecated||(t[e]=r);return t},makersList(){return this.getSorting()}},watch:{user(t){!this.posts.length||t.isGuest||this.initialUser&&t.loaded||(this.page=1,this.posts=[],this.fetchRequests(),this.updateMakers())},query(t){if(0===t.length)return this.page=1,this.posts=[],void this.fetchRequests();this.searchHandler()}},mounted(){window.addEventListener("load",this.notify),this.searchHandler=Object(n.debounce)((()=>{this.search()}),500)},beforeDestroy(){window.removeEventListener("load",this.notify)},methods:{...Object(o.b)("request-icons",{fetchMakers:"fetchMakers"}),...Object(o.d)("request-icons",{setMakers:"SET_MAKERS"}),notify(){void 0===localStorage.requestFirstVisit&&this.$notify({icon:this.$icons["request/thumbsUp"],title:"You can vote for the icons",text:"The requested icons with the most votes we draw first",delay:0,onCloseHandler(){localStorage.requestFirstVisit=Date.now()}})},loadMore(){!this.loadingMore&&this.page<this.pages&&(this.page+=1,this.fetchRequests())},fetchRequests(){if(this.loading||this.loadingMore)return;this.searchNotfound=!1;const t={sort:this.sortBy,page:this.page,limit:this.limit,term:this.query,authToken:this.user.authToken};"object"==typeof this.filterBy&&Object.assign(t,this.filterBy),1===this.page&&(this.loading=!0),this.page>1&&(this.loadingMore=!0),h.a.fetchRequests(t).then((t=>{this.total=t.total,this.pages=t.pages,this.$nextTick((()=>{this.posts=[...this.posts,...t.docs]})),this.posts.length||(this.searchNotfound=!0)})).catch((t=>console.warn(t))).finally((()=>{this.loading=!1,this.loadingMore=!1}))},async updateMakers(){this.makersIsLoading=!0;try{await this.fetchMakers(),this.makersIsLoading=!1}catch(t){this.makersIsLoading=!1}},updateVotes(t,e){e.votesCount=t},requestAdd(data){this.pages>1&&this.pages>this.page&&this.posts.pop(),this.posts.unshift(data)},search(){this.page=1,this.posts=[],this.sortBy="-createdAt",this.filterBy="all",this.fetchRequests()},sort(param){this.sortBy=param,this.page=1,this.posts=[],this.fetchRequests()},filter(param){this.page=1,this.posts=[],this.filterBy=param,this.fetchRequests()}}}),c=(r(1053),r(5)),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"request-page"},[e("div",{staticClass:"container"},[e("h1",[t._v("Icon request")]),t._v(" "),e("request-form",{attrs:{styles:t.requestedPlatformsList,user:t.user},on:{"request:create":t.requestAdd}}),t._v(" "),t.initialEmpty?t._e():e("request-search",{attrs:{user:t.user,makers:t.makersList},on:{"request:sort":t.sort,"request:filter":t.filter},model:{value:t.query,callback:function(e){t.query="string"==typeof e?e.trim():e},expression:"query"}}),t._v(" "),e("div",{staticClass:"request-list"},[t.loading?[e("div",{staticClass:"request-placeholders"},t._l(5,(function(i){return e("request-placeholder",{key:i,attrs:{width:400,height:80}},[e("rect",{attrs:{x:"75",y:"20",rx:"4",ry:"4",width:"250",height:"8"}}),t._v(" "),e("rect",{attrs:{x:"75",y:"35",rx:"4",ry:"4",width:"220",height:"8"}}),t._v(" "),e("rect",{attrs:{x:"75",y:"50",rx:"4",ry:"4",width:"280",height:"8"}}),t._v(" "),e("rect",{attrs:{x:"75",y:"0",rx:"6",ry:"6",width:"320",height:"12"}}),t._v(" "),e("rect",{attrs:{x:"0",y:"0",rx:"6",ry:"6",width:"60",height:"65"}})])})),1)]:t.posts.length?[e("app-infinite-scroll",{attrs:{throttle:50,preloader:t.loadingMore},on:{infinite:t.loadMore}},t._l(t.posts,(function(r,o){return e("request-post",{key:o,attrs:{post:r,user:t.user,makers:t.makersList,"makers-is-loading":t.makersIsLoading,platforms:t.platforms},on:{"update:votes":function(e){return t.updateVotes(e,r)},"request:infiniteScroll":t.updateMakers}})})),1)]:t.searchNotfound?[e("div",{staticClass:"empty"},[e("div",{staticClass:"empty-icon",domProps:{innerHTML:t._s(t.$icons["request/requestSad"])}}),t._v(" "),e("div",{staticClass:"empty-title"},[t._v("\n            No requests found\n          ")])])]:t.initialEmpty?[e("div",{staticClass:"empty"},[e("div",{staticClass:"empty-icon",domProps:{innerHTML:t._s(t.$icons["request/requestEmpty"])}}),t._v(" "),e("div",{staticClass:"empty-title"},[t._v("\n            There are no requests\n          ")]),t._v(" "),e("div",{staticClass:"empty-detail"},[t._v("\n            Here you can request icons that you haven't found. By the way, your request will be the first.\n          ")])])]:t._e()],2)],1)])}),[],!1,null,"8e7f7b94",null);e.default=component.exports},800:function(t,e,r){var content=r(1054);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(7).default)("3dbe804a",content,!0,{sourceMap:!1})}}]);
//# sourceMappingURL=index.714c9f2a132640a083c2.js.map